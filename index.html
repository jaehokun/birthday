<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìƒì¼ ì´ˆëŒ€ì¥ ì‘ì„±</title>
  <!-- âœ… Firebase CDN (í˜¸í™˜ ëª¨ë“œ) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
  <h1>ğŸ‰ ìƒì¼ ì´ˆëŒ€ì¥ ì‘ì„±</h1>

  <label>ì´ë¦„: <input id="name" type="text" /></label><br />
  <label>ë‚ ì§œ: <input id="date" type="date" /></label><br />
  <label>ë‚´ìš©: <textarea id="message"></textarea></label><br />
  <button onclick="save()">ì €ì¥</button>

  <h2>âœ… ì €ì¥ëœ ë°ì´í„°</h2>
  <div id="output"></div>

  <script>
    // âœ… Firebase ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyBsBKKNufp50L9Na03VcSn4HH71Cjfb-tA",
      authDomain: "birthday-invite-4e53b.firebaseapp.com",
      databaseURL: "https://birthday-invite-4e53b-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "birthday-invite-4e53b",
      storageBucket: "birthday-invite-4e53b.appspot.com",
      messagingSenderId: "92936578855",
      appId: "1:92936578855:web:69f84e01db0298cae46b02",
      measurementId: "G-K62XNJJJKD"
    };

    // âœ… Firebase ì´ˆê¸°í™”
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function save() {
      const name = document.getElementById("name").value;
      const date = document.getElementById("date").value;
      const message = document.getElementById("message").value;

      if (!name || !date || !message) {
        alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      const id = Date.now();
      db.ref("invites/" + id).set({
        name: name,
        date: date,
        message: message
      });

      alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
      document.getElementById("name").value = "";
      document.getElementById("date").value = "";
      document.getElementById("message").value = "";
    }

    // âœ… ì‹¤ì‹œê°„ ë°ì´í„° ì¶œë ¥
    db.ref("invites").on("value", (snapshot) => {
      const data = snapshot.val();
      const output = document.getElementById("output");
      output.innerHTML = "";

      for (const key in data) {
        const entry = data[key];
        output.innerHTML += `<p><strong>${entry.name}</strong> - ${entry.date}<br>${entry.message}</p><hr>`;
      }
    });
  </script>
</body>
</html>
